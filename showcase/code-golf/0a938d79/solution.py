def solve(g):M=sorted((i,j,v)for i,r in enumerate(g)for j,v in enumerate(r)if v);(a,b,u),(c,e,w)=M;r,d=c-a,e-b;h=d<1or 0<r<d;D=[d,r][h];return[[[u,w][(k:=[j-b,i-a][h])//D%2]*(k%D<1)*(k>=0)for j,_ in enumerate(R)]for i,R in enumerate(g)]
